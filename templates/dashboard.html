{% extends "base.html" %}
{% block title %}Dashboard – Student Palace{% endblock %}
{% block content %}
<section class="wrap">
  <h1>Landlord dashboard</h1>

  {% if not landlord %}
    <div class="notice">
      <p style="margin:0 0 8px 0;"><strong>You’re not logged in.</strong></p>
      <p class="inline-actions" style="margin:0;">
        <a class="btn" href="{{ url_for('auth.login') }}">Log in</a>
        or
        <a class="btn" href="{{ url_for('auth.signup') }}">Create an account</a>
      </p>
    </div>
  {% else %}

    <!-- Verification status in orange notice box -->
    <div class="notice">
      {% if profile and profile.is_verified %}
        <div style="font-size:18px; display:flex; align-items:center; gap:8px; color:#7c2d12;">
          <span style="display:inline-flex; width:22px; height:22px; border-radius:50%; background:#f59e0b; color:#111; justify-content:center; align-items:center; font-weight:bold;">✓</span>
          <strong>You’re verified</strong>
        </div>
        <p class="muted" style="margin-left:0; margin-top:6px;">Your listings will display a verified badge to tenants.</p>
      {% else %}
        <div style="font-size:18px; display:flex; align-items:center; gap:8px; color:#7c2d12;">
          <span style="display:inline-flex; width:22px; height:22px; border-radius:50%; background:#f59e0b; color:#111; justify-content:center; align-items:center; font-weight:bold;">!</span>
          <strong>Not verified yet</strong>
        </div>
        <p class="muted" style="margin-left:0; margin-top:6px;">We’ll add a verified badge once an admin approves your account.</p>
      {% endif %}
    </div>

    <div class="grid grid-2">
      <div class="card">
        <h3 class="mt-0">Account</h3>
        <p><strong>{{ landlord.email }}</strong></p>
        <p class="help">
          Member since {{ created_at_uk or landlord.created_at }}
          &middot; <em>{{ role_label }}</em>
        </p>
        <p class="inline-actions">
          <a class="btn" href="{{ url_for('landlord.landlord_profile') }}">Edit profile</a>
          <a class="btn btn-outline" href="{{ url_for('landlord.landlord_houses') }}">My houses</a>
          <a class="btn" href="{{ url_for('landlord.house_new') }}">Add a house</a>
        </p>
      </div>

      <div class="card">
        <h3 class="mt-0">Quick links</h3>
        <p class="inline-actions">
          <a class="btn btn-outline" href="{{ url_for('landlord.landlord_houses') }}">Manage houses</a>
        </p>
      </div>
    </div>

    <div class="card" style="margin-top:14px">
      <h3 class="mt-0">Recent houses</h3>
      {% if houses and houses|length %}
        <ul>
          {% for h in houses[:5] %}
            <li>
              <strong>{{ h.title }}</strong> – {{ h.city }}
              <span class="inline-actions" style="margin-left:8px">
                <a class="btn btn-outline" href="{{ url_for('landlord.house_edit', hid=h.id) }}">Edit</a>
                <a class="btn btn-outline" href="{{ url_for('landlord.rooms_list', hid=h.id) }}">Rooms</a>
              </span>
            </li>
          {% endfor %}
        </ul>
        <p style="margin-top:10px">
          <a class="btn" href="{{ url_for('landlord.landlord_houses') }}">View all houses</a>
        </p>
      {% else %}
        <p>No houses yet. <a href="{{ url_for('landlord.house_new') }}">Add your first house</a>.</p>
      {% endif %}
    </div>
  {% endif %}
</section>
{% endblock %}
