{% extends "base.html" %}
{% block title %}Photos – {{ house.title }} – Student Palace{% endblock %}
{% block content %}
<section class="wrap">
  <div class="flex-between" style="margin-bottom:12px">
    <h1 class="mt-0">Photos for “{{ house.title }}”</h1>
    <div class="inline-actions">
      <a class="btn btn-outline" href="{{ url_for('landlord.landlord_houses') }}">Back to My houses</a>
      <a class="btn btn-outline" href="{{ url_for('landlord.house_edit', hid=house.id) }}">Edit house</a>
      <a class="btn btn-outline" href="{{ url_for('landlord.rooms_list', hid=house.id) }}">Manage rooms</a>
    </div>
  </div>

  <div class="card" style="margin-bottom:14px">
    <h3 class="mt-0">Upload photos</h3>
    <p class="help" style="margin-bottom:8px">
      Phase 1 is UI only — uploading is disabled until we wire processing (resize + watermark).
    </p>
    <form method="post" enctype="multipart/form-data"
          action="{{ url_for('landlord.house_photos_upload', hid=house.id) }}">
      <input type="file" name="photos" multiple accept="image/*" disabled>
      <button class="btn" type="submit" disabled>Upload</button>
    </form>
  </div>

  <div class="card">
    <h3 class="mt-0">Current photos</h3>
    {% if photos and photos|length %}
      <div class="grid grid-4" style="gap:12px">
        {% for p in photos %}
          <div class="photo-tile" style="border:1px solid var(--border); border-radius:12px; padding:8px">
            <div style="aspect-ratio:4/3; background:#f5f5f5; border-radius:8px; overflow:hidden; display:flex; align-items:center; justify-content:center">
              <img src="{{ p.url }}" alt="Photo {{ loop.index }}" style="max-width:100%; max-height:100%">
            </div>
            <div class="inline-actions" style="margin-top:8px; justify-content:space-between">
              <form method="post" action="{{ url_for('landlord.house_photos_primary', hid=house.id, img_id=p.id) }}">
                <button class="btn btn-outline" type="submit" {% if p.is_primary %}disabled{% endif %}>
                  {% if p.is_primary %}Primary{% else %}Set primary{% endif %}
                </button>
              </form>
              <form method="post" action="{{ url_for('landlord.house_photos_delete', hid=house.id, img_id=p.id) }}"
                    onsubmit="return confirm('Delete this photo?');">
                <button class="btn btn-admin" type="submit">Delete</button>
              </form>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p class="muted">No photos yet. Upload will be enabled in the next step.</p>
    {% endif %}
  </div>
</section>
{% endblock %}
