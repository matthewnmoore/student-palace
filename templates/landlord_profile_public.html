{% extends "base.html" %}
{% block title %}{{ (profile.display_name or 'Landlord') ~ ' – Student Palace' if profile else 'Landlord – Student Palace' }}{% endblock %}
{% block content %}
<section class="wrap">
  {% if not profile %}
    <h1>Landlord not found</h1>
    <div class="card card--accent-lr">
      <p class="help">This profile doesn’t exist.</p>
    </div>
  {% else %}

    <!-- Header / name -->
    <h1 style="margin-bottom:8px">{{ profile.display_name or 'Landlord' }}</h1>

    {# Status banner (verified / not verified) #}
    {% if profile and (profile.is_verified|default(0, true)) %}
      <div class="card card--accent-lr" style="display:flex;align-items:center;gap:10px;padding:12px 14px;margin-bottom:12px">
        <span aria-hidden="true" style="font-size:20px">✅</span>
        <div style="font-weight:600">You’re verified – your listings show a verified badge to tenants.</div>
      </div>
    {% else %}
      <div class="card card--accent-lr" style="display:flex;align-items:center;gap:10px;padding:12px 14px;margin-bottom:12px">
        <span aria-hidden="true" style="font-size:20px">❌</span>
        <div style="font-weight:600">Not verified – get verified to boost renter trust.</div>
      </div>
    {% endif %}

    <!-- Two-column layout -->
    <div class="grid" style="grid-template-columns: 1fr 280px; gap:16px; align-items:start">

      <!-- LEFT: About + contact -->
      <div style="display:flex; flex-direction:column; gap:16px">
        <!-- About -->
        <div class="card card--accent-lr" style="min-height:220px; display:flex; flex-direction:column">
          <h2 style="margin:0 0 8px">About</h2>
          <p style="margin-top:0; flex:1">{{ profile.bio or 'No bio provided yet.' }}</p>
        </div>

        <!-- Contact -->
        <div class="card card--accent-lr" style="min-height:160px">
          <h2 style="margin:0 0 8px">Contact</h2>
          <div class="grid grid-2">
            <p><strong>Email:</strong> {{ contact_email or '—' }}</p>
            <p><strong>Phone:</strong> {{ profile.phone or '—' }}</p>
          </div>
          <p style="margin-top:6px">
            <strong>Website:</strong>
            {% if profile.website %}
              <a href="{{ profile.website }}" target="_blank" rel="noopener">{{ profile.website }}</a>
            {% else %}—{% endif %}
          </p>
          <p class="muted" style="margin-top:10px">Profile views: {{ profile.profile_views or 0 }}</p>
        </div>
      </div>

      <!-- RIGHT: Media (smaller cards) -->
      <aside style="display:flex; flex-direction:column; gap:16px">
        <!-- Logo -->
        <div class="card card--accent-lr">
          <h3 style="margin-top:0">Logo</h3>
          <div style="width:100%; max-width:180px; aspect-ratio:1/1; border:1px solid var(--border); border-radius:12px; overflow:hidden; background:#f6f3ff">
            {% if profile.logo_path %}
              <img
                src="{{ url_for('static', filename=profile.logo_path) }}?v={{ profile.profile_views or 0 }}"
                alt="Landlord logo"
                style="width:100%; height:100%; object-fit:cover">
            {% else %}
              <div style="width:100%; height:100%; display:flex; align-items:center; justify-content:center; color:#b9a6ff; font-weight:700">
                LOGO
              </div>
            {% endif %}
          </div>
        </div>

        <!-- Photo -->
        <div class="card card--accent-lr">
          <h3 style="margin-top:0">Photo</h3>
          <div style="width:100%; max-width:180px; aspect-ratio:1/1; border:1px solid var(--border); border-radius:12px; overflow:hidden; background:#f6f3ff">
            {% if profile.photo_path %}
              <img
                src="{{ url_for('static', filename=profile.photo_path) }}?v={{ profile.profile_views or 0 }}"
                alt="Landlord photo"
                style="width:100%; height:100%; object-fit:cover">
            {% else %}
              <div style="width:100%; height:100%; display:flex; align-items:center; justify-content:center; color:#b9a6ff; font-weight:700">
                PHOTO
              </div>
            {% endif %}
          </div>
        </div>
      </aside>

    </div>

    <!-- FULL-WIDTH: Accreditations -->
    <div class="card card--accent-lr" style="margin-top:16px">
      <h2 style="margin:0 0 12px">Accreditations</h2>
      {% if accreditations and accreditations|length %}
        <div class="grid" style="grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap:12px">
          {% for a in accreditations %}
            <div>
              <strong>{{ a.name }}</strong>
              {% if a.help_text %}
                <div class="muted small">{{ a.help_text }}</div>
              {% endif %}
            </div>
          {% endfor %}
        </div>
      {% else %}
        <p class="muted">No accreditations listed.</p>
      {% endif %}
    </div>

  {% endif %}
</section>
{% endblock %}
