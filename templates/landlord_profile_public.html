{% extends "base.html" %}
{% block title %}{{ (profile.display_name or 'Landlord') ~ ' – Student Palace' if profile else 'Landlord – Student Palace' }}{% endblock %}
{% block content %}
<section class="wrap">
  {% if not profile %}
    <h1>Landlord not found</h1>
    <div class="card card--accent-lr"><p class="help">This profile doesn’t exist.</p></div>
  {% else %}

    <!-- Header / name -->
    <h1 style="margin-bottom:8px">{{ profile.display_name or 'Landlord' }}</h1>

    <!-- Verified / not verified banner -->
    {% if profile.is_verified|default(0, true) %}
      <div class="card card--accent-lr" style="display:flex;align-items:center;gap:10px;padding:12px 14px;margin:12px 0">
        <span aria-hidden="true" style="font-size:20px; color:#22c55e">✔️</span>
        <div style="font-weight:600">Verified – Listings from this landlord display a verified badge.</div>
      </div>
    {% else %}
      <div class="card card--accent-lr" style="display:flex;align-items:center;gap:10px;padding:12px 14px;margin:12px 0">
        <span aria-hidden="true" style="font-size:20px; color:#f59e0b">❌</span>
        <div style="font-weight:600">Not verified – Get verified to boost renter trust.</div>
      </div>
    {% endif %}

    <!-- Two-column layout -->
    <div class="grid" style="grid-template-columns: 1fr 320px; gap:16px; align-items:start">

      <!-- LEFT: About + contact -->
      <div>
        <!-- About -->
        <div class="card card--accent-lr">
          <h2 style="margin:0 0 8px">About</h2>
          <p>{{ profile.bio or 'No bio provided yet.' }}</p>
        </div>

        <!-- Contact -->
        <div class="card card--accent-lr">
          <h2 style="margin:0 0 8px">Contact</h2>
          <div class="grid grid-2">
            <p><strong>Email:</strong> {{ contact_email or '—' }}</p>
            <p><strong>Phone:</strong> {{ profile.phone or '—' }}</p>
          </div>
          <p style="margin-top:6px">
            <strong>Website:</strong>
            {% if profile.website %}
              <a href="{{ profile.website }}" target="_blank" rel="noopener">{{ profile.website }}</a>
            {% else %}—{% endif %}
          </p>
          <p class="muted" style="margin-top:10px">Profile views: {{ profile.profile_views or 0 }}</p>
        </div>
      </div>

      <!-- RIGHT: Media (logo + photo) + accreditations -->
      <aside style="display:flex; flex-direction:column; gap:16px">
        <!-- Logo -->
        <div class="card card--accent-lr">
          <h3 style="margin-top:0">Logo</h3>
          <div style="width:100%; max-width:220px; aspect-ratio:1/1; border:1px solid var(--border); border-radius:12px; overflow:hidden; background:#f6f3ff">
            {% if profile.logo_path %}
              <img
                src="{{ url_for('static', filename=profile.logo_path) }}?v={{ profile.profile_views or 0 }}"
                alt="Landlord logo"
                style="width:100%; height:100%; object-fit:cover">
            {% else %}
              <div style="width:100%; height:100%; display:flex; align-items:center; justify-content:center; color:#b9a6ff; font-weight:700">
                LOGO
              </div>
            {% endif %}
          </div>
        </div>

        <!-- Photo -->
        <div class="card card--accent-lr">
          <h3 style="margin-top:0">Photo</h3>
          <div style="width:100%; max-width:220px; aspect-ratio:1/1; border:1px solid var(--border); border-radius:12px; overflow:hidden; background:#f6f3ff">
            {% if profile.photo_path %}
              <img
                src="{{ url_for('static', filename=profile.photo_path) }}?v={{ profile.profile_views or 0 }}"
                alt="Landlord photo"
                style="width:100%; height:100%; object-fit:cover">
            {% else %}
              <div style="width:100%; height:100%; display:flex; align-items:center; justify-content:center; color:#b9a6ff; font-weight:700">
                PHOTO
              </div>
            {% endif %}
          </div>
        </div>

        <!-- Accreditations (public) -->
        {% if accreditations and accreditations|length %}
          <div class="card card--accent-lr">
            <h3 style="margin-top:0">Accreditations</h3>
            <ul style="margin:0; padding-left:18px">
              {% for a in accreditations %}
                <li style="margin:6px 0">
                  <strong>{{ a.name }}</strong>
                  {% if a.note %}
                    <span class="muted">— {{ a.note }}</span>
                  {% endif %}
                </li>
              {% endfor %}
            </ul>
          </div>
        {% endif %}
      </aside>

    </div>
  {% endif %}
</section>
{% endblock %}
