{% extends "base.html" %}
{% block title %}Admin · Backup{% endblock %}
{% block content %}
<section class="wrap">
  <div class="flex-between" style="margin-bottom:12px">
    <h1 class="mt-0">Admin · Backup</h1>
    <div class="inline-actions">
      <a class="btn btn-outline" href="{{ url_for('admin.admin_dashboard') }}">← Back to dashboard</a>
    </div>
  </div>

  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for cat, msg in messages %}
        <div class="flash {{ cat }}">{{ msg }}</div>
      {% endfor %}
    {% endif %}
  {% endwith %}

  <div class="card" style="margin-top:10px;">
    <h3 class="mt-0">Manual backup</h3>
    <p>Download a ZIP containing the SQLite database and uploads.</p>
    <a class="btn" href="{{ url_for('admin_backup_download') }}">Download ZIP</a>
  </div>

  <div class="card" style="margin-top:14px;">
    <h3 class="mt-0">Upload to Dropbox</h3>
    <p>Runs the server-side backup and uploads it to your Dropbox (if configured).</p>
    <form method="post">
      <button class="btn btn-outline" type="submit">Run Dropbox backup</button>
    </form>
  </div>
</section>
{% endblock %}
