{% extends "base.html" %}

{% block content %}
<section class="hero">
  <div class="hero-overlay">
    <div class="hero-text">
      <h1>Your next student home without the faff</h1>
      <p>Search verified properties from trusted landlords</p>
      <form action="{{ url_for('public.search') }}" method="get" class="search-form">
        <input type="text" name="q" placeholder="Search by city or property..." required>
        <button type="submit">Search</button>
      </form>
      <div class="verified-info">
        <p>
          Look out for the ✅ green tick – it means properties from verified landlords and agents.<br>
          To search for rooms, flats or houses just for Students
        </p>
      </div>
    </div>
  </div>
</section>

<section class="featured">
  <h2>Featured Cities</h2>
  <div class="city-grid">
    {% for city in cities %}
      <a href="{{ url_for('public.search', city=city.name) }}" class="city-card">
        <img src="{{ url_for('static', filename='img/' ~ city.image) }}" alt="{{ city.name }}">
        <span>{{ city.name }}</span>
      </a>
    {% endfor %}
  </div>
</section>

<section class="featured-properties">
  <h2>Featured Properties</h2>
  <div class="property-grid">
    {% for house in featured %}
      <a href="{{ url_for('public.property_detail', house_id=house.id) }}" class="property-card">
        {% if house.images %}
          <img src="{{ url_for('static', filename='uploads/' ~ house.images[0].filename) }}" alt="{{ house.title }}">
        {% else %}
          <img src="{{ url_for('static', filename='img/default-house.jpg') }}" alt="{{ house.title }}">
        {% endif %}
        <div class="property-info">
          <h3>{{ house.title }}</h3>
          <p>{{ house.city.name }} · {{ house.bedrooms_total }} bedrooms</p>
          <p>£{{ house.price_pppw }} pppw{% if house.bills_included %} (bills included){% endif %}</p>
        </div>
      </a>
    {% endfor %}
  </div>
</section>
{% endblock %}
