{% extends "base.html" %}
{% block title %}Rooms – {{ house.title }} · Student Palace{% endblock %}
{% block content %}
<section class="wrap">
  <h1>Rooms for “{{ house.title }}”</h1>
  <p class="muted">{{ house.address }}, {{ house.city }}</p>

  <div class="card" style="margin-top:12px">
    <a class="btn" href="{{ url_for('room_new', hid=house.id) }}">Add a room</a>
    <a class="btn btn-outline" href="{{ url_for('house_edit', hid=house.id) }}">Back to house</a>
    <a class="btn btn-outline" href="{{ url_for('landlord_houses') }}" style="margin-left:6px">All houses</a>
  </div>

  <div class="card">
    {% if rooms and rooms|length %}
      <table class="table">
        <thead>
          <tr>
            <th>Room</th>
            <th>Bed</th>
            <th>Ensuite</th>
            <th>Features</th>
            <th>Size</th>
            <th style="width:220px">Actions</th>
          </tr>
        </thead>
        <tbody>
        {% for r in rooms %}
          <tr>
            <td><strong>{{ r.name }}</strong></td>
            <td>{{ r.bed_size }}</td>
            <td>{{ 'Yes' if r.ensuite else 'No' }}</td>
            <td>
              {% set feats = [] %}
              {% if r.tv %}{% set _ = feats.append('TV') %}{% endif %}
              {% if r.desk_chair %}{% set _ = feats.append('Desk & chair') %}{% endif %}
              {% if r.wardrobe %}{% set _ = feats.append('Wardrobe') %}{% endif %}
              {% if r.chest_drawers %}{% set _ = feats.append('Chest of drawers') %}{% endif %}
              {% if r.lockable_door %}{% set _ = feats.append('Lockable bedroom') %}{% endif %}
              {% if r.wired_internet %}{% set _ = feats.append('Wired internet') %}{% endif %}
              {{ feats|join(', ') if feats else '—' }}
            </td>
            <td>{{ r.room_size or '—' }}</td>
            <td>
              <div class="inline-actions">
                <a class="btn" href="{{ url_for('room_edit', hid=house.id, rid=r.id) }}">Edit</a>
                <form method="post" action="{{ url_for('room_delete', hid=house.id, rid=r.id) }}" onsubmit="return confirm('Delete {{ r.name }}?')">
                  <button class="btn btn-admin" type="submit">Delete</button>
                </form>
              </div>
            </td>
          </tr>
        {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p>No rooms yet.</p>
    {% endif %}
  </div>
</section>
{% endblock %}
