


UPDATED WITH NEW FIELDS
=======================



06/09/2025

📍 Table: cities
	•	id – PK, auto-increment.
	•	name – City name (unique).
	•	is_active – 1 = selectable, 0 = hidden.

⸻

📍 Table: landlords
	•	id – PK, auto-increment.
	•	email – Unique login email.
	•	password_hash – Hashed password.
	•	created_at – Timestamp created.

⸻

📍 Table: landlord_profiles
	•	landlord_id – PK, FK → landlords.id.
	•	display_name – Public name.
	•	phone – Phone number.
	•	website – Website URL.
	•	bio – Description text.
	•	public_slug – Unique profile slug.
	•	profile_views – Counter.
	•	is_verified – 1 = verified.
	•	role – “owner” / “agent”.
	•	logo_path – Optional logo path.
	•	photo_path – Optional photo path.
	•	enable_new_landlord – Admin toggle (1 = allow new landlord signups). [NEW]

⸻

📍 Table: houses
	•	id – PK, auto-increment.
	•	landlord_id – FK → landlords.id.
	•	title – Listing title.
	•	city – City (FK → cities.name).
	•	address – Full address.
	•	letting_type – “whole” / “share”.
	•	bedrooms_total – Total bedrooms.
	•	gender_preference – “Male”/“Female”/“Mixed”/“Either”.
	•	bills_included – Legacy flag.
	•	shared_bathrooms – Number.
	•	off_street_parking – 1/0.
	•	local_parking – 1/0.
	•	cctv – 1/0.
	•	video_door_entry – 1/0.
	•	bike_storage – 1/0.
	•	cleaning_service – Text.
	•	wifi – 1/0.
	•	wired_internet – 1/0.
	•	common_area_tv – 1/0.
	•	created_at – Timestamp.
	•	listing_type – “owner” / “agent”.
	•	bills_option – “yes” / “some” / “no”.
	•	bills_util_gas – 1/0.
	•	bills_util_electric – 1/0.
	•	bills_util_water – 1/0.
	•	bills_util_broadband – 1/0.
	•	bills_util_tv – 1/0.
	•	washing_machine – 1/0.
	•	tumble_dryer – 1/0.
	•	dishwasher – 1/0.
	•	cooker – 1/0.
	•	microwave – 1/0.
	•	coffee_maker – 1/0.
	•	central_heating – 1/0.
	•	air_con – 1/0.
	•	vacuum – 1/0.
	•	fob_entry – 1/0.
	•	garden – 1/0.
	•	roof_terrace – 1/0.
	•	games_room – 1/0.
	•	cinema_room – 1/0.
	•	epc_rating – Text.
	•	description – Property description.
	•	ensuites_total – Precomputed ensuite count. [NEW]
	•	available_rooms_total – Precomputed available room count. [NEW]
	•	available_rooms_prices – Precomputed price summary. [NEW]
	•	double_beds_total – Precomputed count of double+ beds. [NEW]
	•	suitable_for_couples_total – Precomputed couples_ok count. [NEW]
	•	post_code_prefix – Restriction prefix. [NEW]

⸻

📍 Table: rooms
	•	id – PK, auto-increment.
	•	house_id – FK → houses.id.
	•	name – Room label.
	•	ensuite – 1/0.
	•	bed_size – “Single”/“Double”/etc.
	•	tv – 1/0.
	•	desk_chair – 1/0.
	•	wardrobe – 1/0.
	•	chest_drawers – 1/0.
	•	lockable_door – 1/0.
	•	wired_internet – 1/0.
	•	room_size – Free text.
	•	created_at – Timestamp.
	•	price_pcm – Rent in GBP.
	•	safe – 1/0.
	•	dressing_table – 1/0.
	•	mirror – 1/0.
	•	bedside_table – 1/0.
	•	blinds – 1/0.
	•	curtains – 1/0.
	•	sofa – 1/0.
	•	couples_ok – 1/0.
	•	disabled_ok – 1/0.
	•	is_let – 1 = let, 0 = available.
	•	available_from – Date.
	•	let_until – Date.
	•	description – Room description.

⸻

📍 Table: house_images
	•	id – PK, auto-increment.
	•	house_id – FK → houses.id.
	•	file_name – Original name.
	•	filename – Synced/clean name.
	•	file_path – Storage path.
	•	width – px width.
	•	height – px height.
	•	bytes – File size.
	•	is_primary – 1/0.
	•	created_at – Upload time.
	•	sort_order – Sort index.

⸻

📍 Table: house_documents
	•	id – PK, auto-increment.
	•	house_id – FK → houses.id.
	•	doc_type – “epc”, etc.
	•	file_name – Original filename.
	•	file_path – Storage path.
	•	bytes – File size.
	•	created_at – Upload time.
	•	is_current – 1/0.

⸻

📍 Table: students [NEW]
	•	id – PK, auto-increment.
	•	email – Unique login email.
	•	name – Student name.
	•	phone_number – Contact number. [NEW]
	•	created_at – Timestamp created.
	•	updated_at – Timestamp updated.

⸻

📍 Table: student_favourites [NEW]
	•	student_id – FK → students.id.
	•	house_id – FK → houses.id.
	•	created_at – Timestamp saved.
	•	(PK = student_id, house_id).

⸻

📍 Table: site_settings [NEW]
	•	key – Setting key (e.g. “show_metric_landlords”).
	•	value – Setting value (string).
	•	Defaults include:
	•	show_metric_landlords
	•	show_metric_houses
	•	show_metric_rooms
	•	show_metric_students
	•	show_metric_photos







05/09/2025

TABLE: cities
	•	id (INTEGER, PK) → Auto-increment ID.
	•	name (TEXT, UNIQUE) → City name shown in UI and used for filtering.
	•	is_active (INTEGER, 0/1) → Whether city is selectable/visible.

TABLE: landlords
	•	id (INTEGER, PK) → Auto-increment ID.
	•	email (TEXT, UNIQUE) → Login / contact email.
	•	password_hash (TEXT) → Hashed password.
	•	created_at (TEXT, ISO) → When the landlord account was created.

TABLE: landlord_profiles
	•	landlord_id (INTEGER, PK/FK landlords.id) → One-to-one with landlords.
	•	display_name (TEXT) → Public display name.
	•	phone (TEXT) → Public or internal phone number.
	•	website (TEXT) → Landlord website URL.
	•	bio (TEXT) → Profile bio/description.
	•	public_slug (TEXT, UNIQUE) → Public profile URL slug (/l/).
	•	profile_views (INTEGER) → Counter for profile views.
	•	is_verified (INTEGER, 0/1) → Shows ✅ badge on listings.
	•	role (TEXT: ‘owner’|‘agent’) → Listing role type.
	•	logo_path (TEXT, nullable) → Path to landlord logo under /static.
	•	photo_path (TEXT, nullable) → Path to landlord photo under /static.
	•	enable_new_landlord (INTEGER, 0/1) [NEW] → Admin toggle to allow/stop creation of NEW landlord accounts (1 = enabled, 0 = disabled).

TABLE: houses
	•	id (INTEGER, PK) → Auto-increment property ID.
	•	landlord_id (INTEGER, FK landlords.id) → Owner/agent of the property.
	•	title (TEXT) → Listing title.
	•	city (TEXT) → City name (matches cities.name).
	•	address (TEXT) → Full street address.
	•	letting_type (TEXT: ‘whole’|‘share’) → Whole property vs room share.
	•	bedrooms_total (INTEGER) → Total bedrooms in the property.
	•	gender_preference (TEXT: ‘Male’|‘Female’|‘Mixed’|‘Either’) → Preference tag.
	•	bills_included (INTEGER, 0/1) → Legacy bills flag (kept for back-compat).
	•	shared_bathrooms (INTEGER) → Count of shared bathrooms.
	•	off_street_parking (INTEGER, 0/1) → Driveway/allocated parking.
	•	local_parking (INTEGER, 0/1) → On-street/nearby parking.
	•	cctv (INTEGER, 0/1) → CCTV present.
	•	video_door_entry (INTEGER, 0/1) → Video entry present.
	•	bike_storage (INTEGER, 0/1) → Bike storage present.
	•	cleaning_service (TEXT) → e.g. ‘none’, ‘monthly’, etc.
	•	wifi (INTEGER, 0/1) → Wi-Fi provided.
	•	wired_internet (INTEGER, 0/1) → Ethernet available.
	•	common_area_tv (INTEGER, 0/1) → TV in shared area.
	•	created_at (TEXT, ISO) → When the house record was created.
	•	listing_type (TEXT: ‘owner’|‘agent’) → Display badge for who lists it.
	•	bills_option (TEXT: ‘no’|‘some’|‘yes’) → New bills selector.
	•	bills_util_gas (INTEGER, 0/1) → Gas included if ‘some’.
	•	bills_util_electric (INTEGER, 0/1) → Electric included if ‘some’.
	•	bills_util_water (INTEGER, 0/1) → Water included if ‘some’.
	•	bills_util_broadband (INTEGER, 0/1) → Broadband included if ‘some’.
	•	bills_util_tv (INTEGER, 0/1) → TV licence included if ‘some’.
	•	washing_machine (INTEGER, 0/1) → Amenity flag.
	•	tumble_dryer (INTEGER, 0/1) → Amenity flag.
	•	dishwasher (INTEGER, 0/1) → Amenity flag.
	•	cooker (INTEGER, 0/1) → Amenity flag.
	•	microwave (INTEGER, 0/1) → Amenity flag.
	•	coffee_maker (INTEGER, 0/1) → Amenity flag.
	•	central_heating (INTEGER, 0/1) → Amenity flag.
	•	air_con (INTEGER, 0/1) → Amenity flag.
	•	vacuum (INTEGER, 0/1) → Amenity flag.
	•	fob_entry (INTEGER, 0/1) → Amenity/security flag.
	•	garden (INTEGER, 0/1) → Outdoor/garden present.
	•	roof_terrace (INTEGER, 0/1) → Roof terrace present.
	•	games_room (INTEGER, 0/1) → Games room present.
	•	cinema_room (INTEGER, 0/1) → Cinema/media room present.
	•	epc_rating (TEXT) → EPC rating text (e.g. ‘C 75’).
	•	description (TEXT) → Public description of the property.
	•	ensuites_total (INTEGER) [NEW] → Pre-computed total number of ensuite bedrooms in this house.
	•	available_rooms_total (INTEGER) [NEW] → Pre-computed count of rooms currently available (is_let = 0).
	•	available_rooms_prices (TEXT) [NEW] → Pre-computed price summary for available rooms (e.g. JSON or “Room 1:999;Room 2:850”).
	•	double_beds_total (INTEGER) [NEW] → Pre-computed count of rooms with bed_size in (‘Small double’,‘Double’,‘King’).
	•	suitable_for_couples_total (INTEGER) [NEW] → Pre-computed count of rooms where couples_ok = 1.
	•	post_code_prefix (TEXT) [NEW] → Allowed postcode prefix for saving new houses (used to restrict out-of-area entries).

TABLE: rooms
	•	id (INTEGER, PK) → Auto-increment room ID.
	•	house_id (INTEGER, FK houses.id) → Parent property.
	•	name (TEXT) → Room label (e.g. ‘Bedroom 2’).
	•	ensuite (INTEGER, 0/1) → Private bathroom in this room.
	•	bed_size (TEXT: ‘Single’|‘Small double’|‘Double’|‘King’) → Bed size.
	•	tv (INTEGER, 0/1) → TV in room.
	•	desk_chair (INTEGER, 0/1) → Desk/chair present.
	•	wardrobe (INTEGER, 0/1) → Wardrobe present.
	•	chest_drawers (INTEGER, 0/1) → Chest of drawers present.
	•	lockable_door (INTEGER, 0/1) → Lock on the bedroom door.
	•	wired_internet (INTEGER, 0/1) → Ethernet in room.
	•	room_size (TEXT) → Free-text e.g. ‘12 m²’ or ‘3.5 x 4.0m’.
	•	created_at (TEXT, ISO) → When the room record was created.
	•	price_pcm (INTEGER) → Monthly price in whole pounds.
	•	safe (INTEGER, 0/1) → Safe present.
	•	dressing_table (INTEGER, 0/1) → Dressing table present.
	•	mirror (INTEGER, 0/1) → Mirror present.
	•	bedside_table (INTEGER, 0/1) → Bedside table present.
	•	blinds (INTEGER, 0/1) → Blinds present.
	•	curtains (INTEGER, 0/1) → Curtains present.
	•	sofa (INTEGER, 0/1) → Sofa present.
	•	couples_ok (INTEGER, 0/1) → Couples allowed in this room.
	•	disabled_ok (INTEGER, 0/1) → Accessibility suitability flag.
	•	is_let (INTEGER, 0/1) → 1 if currently let; 0 if available.
	•	available_from (TEXT, ISO or empty) → If not available now, the date it becomes available.
	•	let_until (TEXT, ISO or empty) → If let, the end date of the current let.
	•	description (TEXT) → Public room description.

TABLE: house_images
	•	id (INTEGER, PK) → Auto-increment image ID.
	•	house_id (INTEGER, FK houses.id) → Parent property.
	•	file_name (TEXT) → Original filename (legacy).
	•	filename (TEXT) → Synced filename (back-filled).
	•	file_path (TEXT) → Relative path under /static (used in templates).
	•	width (INTEGER) → Image width (px).
	•	height (INTEGER) → Image height (px).
	•	bytes (INTEGER) → File size (bytes).
	•	is_primary (INTEGER, 0/1) → Whether to show first.
	•	created_at (TEXT, ISO) → When uploaded.
	•	sort_order (INTEGER) → Manual order for thumbnails.

TABLE: house_documents
	•	id (INTEGER, PK) → Auto-increment doc ID.
	•	house_id (INTEGER, FK houses.id) → Parent property.
	•	doc_type (TEXT) → ‘epc’ (and future types).
	•	file_name (TEXT) → Original filename.
	•	file_path (TEXT) → Relative path under /static.
	•	bytes (INTEGER) → File size (bytes).
	•	created_at (TEXT, ISO) → Upload time.
	•	is_current (INTEGER, 0/1) → Current/active document flag.











📍 Table: cities
	•	id → unique identifier (auto-increment).
	•	name → city name (e.g. “Leeds”).
	•	is_active → 1 = visible to users, 0 = hidden.

⸻

📍 Table: landlords
	•	id → unique landlord ID.
	•	email → landlord login email.
	•	password_hash → hashed password.
	•	created_at → date/time landlord account created.

⸻

📍 Table: landlord_profiles
	•	landlord_id → foreign key to landlords.id.
	•	display_name → public display name of landlord/agency.
	•	phone → phone number.
	•	website → website URL.
	•	bio → landlord bio/description.
	•	public_slug → unique slug for public profile URL.
	•	profile_views → counter for how many times profile viewed.
	•	is_verified → 1 = verified badge, 0 = not verified.
	•	role → “owner” or “agent”.
	•	logo_path → optional landlord/company logo.
	•	photo_path → optional landlord profile photo.

⸻

📍 Table: houses
	•	id → unique house ID.
	•	landlord_id → foreign key to landlords.id.
	•	title → listing title (headline).
	•	city → city (links to dropdown).
	•	address → full address string.
	•	letting_type → “whole” or “share”.
	•	bedrooms_total → total number of bedrooms in property.
	•	gender_preference → “Male”, “Female”, “Mixed”, or “Either”.
	•	bills_included → legacy yes/no integer (now superseded by bills_option).
	•	shared_bathrooms → number of shared bathrooms.
	•	off_street_parking → 1/0 flag.
	•	local_parking → 1/0 flag.
	•	cctv → 1/0 flag.
	•	video_door_entry → 1/0 flag.
	•	bike_storage → 1/0 flag.
	•	cleaning_service → e.g. “weekly”, “none”.
	•	wifi → 1/0 flag.
	•	wired_internet → 1/0 flag.
	•	common_area_tv → 1/0 flag.
	•	created_at → timestamp when house added.
	•	listing_type → “owner” or “agent”.
	•	bills_option → “yes”, “some”, “no”.
	•	bills_util_gas → 1/0.
	•	bills_util_electric → 1/0.
	•	bills_util_water → 1/0.
	•	bills_util_broadband → 1/0.
	•	bills_util_tv → 1/0.
	•	washing_machine → 1/0.
	•	tumble_dryer → 1/0.
	•	dishwasher → 1/0.
	•	cooker → 1/0.
	•	microwave → 1/0.
	•	coffee_maker → 1/0.
	•	central_heating → 1/0.
	•	air_con → 1/0.
	•	vacuum → 1/0.
	•	fob_entry → 1/0.
	•	garden → 1/0.
	•	roof_terrace → 1/0.
	•	games_room → 1/0.
	•	cinema_room → 1/0.
	•	epc_rating → EPC text label.
	•	description → property description text.

⸻

📍 Table: rooms
	•	id → unique room ID.
	•	house_id → foreign key to houses.id.
	•	name → room name/label.
	•	ensuite → 1/0 if ensuite bathroom.
	•	bed_size → “Single”, “Double”, etc.
	•	tv → 1/0 flag.
	•	desk_chair → 1/0 flag.
	•	wardrobe → 1/0 flag.
	•	chest_drawers → 1/0 flag.
	•	lockable_door → 1/0 flag.
	•	wired_internet → 1/0 flag.
	•	room_size → free text (e.g. “20 m²”).
	•	created_at → timestamp when room added.
	•	price_pcm → monthly rent for the room.
	•	safe → 1/0 flag.
	•	dressing_table → 1/0 flag.
	•	mirror → 1/0 flag.
	•	bedside_table → 1/0 flag.
	•	blinds → 1/0 flag.
	•	curtains → 1/0 flag.
	•	sofa → 1/0 flag.
	•	couples_ok → 1/0 flag.
	•	disabled_ok → 1/0 flag.
	•	is_let → 1 = room already let, 0 = available.
	•	available_from → date available from.
	•	let_until → date available until (auto-let after).
	•	description → room description text.

⸻

📍 Table: house_images
	•	id → unique image ID.
	•	house_id → foreign key to houses.id.
	•	file_name → original upload filename.
	•	file_path → relative storage path (under /static).
	•	width → pixel width.
	•	height → pixel height.
	•	bytes → file size in bytes.
	•	is_primary → 1 = featured image.
	•	created_at → timestamp when uploaded.
	•	filename → duplicate name column (backfill compat).
	•	sort_order → integer sort index.

⸻

📍 Table: house_documents
	•	id → unique doc ID.
	•	house_id → foreign key to houses.id.
	•	doc_type → type of doc (“epc”, etc.).
	•	file_name → file basename.
	•	file_path → storage path (under /static).
	•	bytes → file size in bytes.
	•	created_at → timestamp uploaded.
	•	is_current → 1 = current valid doc, 0 = old/archived.























📋 houses
	•	id
	•	landlord_id
	•	title
	•	city
	•	address
	•	letting_type
	•	bedrooms_total
	•	gender_preference
	•	bills_included
	•	shared_bathrooms
	•	off_street_parking
	•	local_parking
	•	cctv
	•	video_door_entry
	•	bike_storage
	•	cleaning_service
	•	wifi
	•	wired_internet
	•	common_area_tv
	•	created_at
	•	listing_type
	•	bills_option
	•	bills_util_gas
	•	bills_util_electric
	•	bills_util_water
	•	bills_util_broadband
	•	bills_util_tv
	•	washing_machine
	•	tumble_dryer
	•	dishwasher
	•	cooker
	•	microwave
	•	coffee_maker
	•	central_heating
	•	air_con
	•	vacuum
	•	fob_entry
	•	garden
	•	roof_terrace
	•	games_room
	•	cinema_room
	•	epc_rating
	•	description

⸻

📋 rooms
	•	id
	•	house_id
	•	name
	•	ensuite
	•	bed_size
	•	tv
	•	desk_chair
	•	wardrobe
	•	chest_drawers
	•	lockable_door
	•	wired_internet
	•	room_size
	•	created_at
	•	price_pcm
	•	safe
	•	dressing_table
	•	mirror
	•	bedside_table
	•	blinds
	•	curtains
	•	sofa
	•	couples_ok
	•	disabled_ok
	•	is_let
	•	available_from
	•	let_until
	•	description

⸻

📋 landlords
	•	id
	•	email
	•	password_hash
	•	created_at

⸻

📋 landlord_profiles
	•	landlord_id
	•	display_name
	•	phone
	•	website
	•	bio
	•	public_slug
	•	profile_views
	•	is_verified
	•	role
	•	logo_path
	•	photo_path

⸻

📋 cities
	•	id
	•	name
	•	is_active

⸻

📋 house_images
	•	id
	•	house_id
	•	file_name
	•	file_path
	•	width
	•	height
	•	bytes
	•	is_primary
	•	created_at
	•	filename
	•	sort_order

⸻

📋 house_documents
	•	id
	•	house_id
	•	doc_type
	•	file_name
	•	file_path
	•	bytes
	•	created_at
	•	is_current
